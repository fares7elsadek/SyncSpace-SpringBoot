<!-- Online Friends Header -->
<div class="text-xs font-semibold text-discord-text-dark uppercase tracking-wide mb-4 flex items-center">
        <span>Online - {{onlineFriends()}}</span>
</div>

<!-- Online Friends -->
<div class="space-y-2" id="friends-list" *ngFor="let friend of friends()">
    <div *ngIf="friend.user.isOnline" class="friend-item flex items-center p-3 rounded-lg cursor-pointer group" [ngClass]="{'opacity-50': friendStatus(friend.user.isOnline) === 'offline'}" >
                   <!-- Avatar + Status -->
                    <div class="relative mr-3 flex-shrink-0">
                    <img 
                        src="{{friend.user.avatarUrl}}" 
                        alt="User Avatar" 
                        class="w-10 h-10 rounded-full object-cover border-2 border-gray-300 shadow-sm"
                    />
                    <div 
                        class="absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 border-2 border-discord-bg rounded-full" 
                        [ngClass]="'status-' + friendStatus(friend.user.isOnline)">
                    </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="text-sm font-medium text-white">{{friend.user.firstName + " " + friend.user.lastName}}</div>
                        <div class="text-xs text-discord-text-muted">Playing</div>
                    </div>
                    <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                        <button class="p-2 hover:bg-discord-darker rounded-full" title="Message" (click)="startDM(friend.user.id)">
                            <svg class="w-5 h-5 text-discord-text-muted hover:text-discord-text" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v3c0 .6.4 1 1 1h.5c.2 0 .4-.1.5-.2l3.7-3.8H20c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
                            </svg>
                        </button>
                        <!-- <ng-container *ngIf="friend.status !== 'offline' && friend.status !== 'dnd'">
                        <button class="p-2 hover:bg-discord-darker rounded-full" title="Call" (click)="callFriend(friend.name)">
                            <svg class="w-5 h-5 text-discord-text-muted hover:text-discord-text" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                            </svg>
                        </button>
                        </ng-container>
                        <button class="p-2 hover:bg-discord-darker rounded-full" title="More" (click)="showFriendOptions(friend.name)">
                            <svg class="w-5 h-5 text-discord-text-muted hover:text-discord-text" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                            </svg>
                        </button> -->
                    </div>
                </div>
</div>